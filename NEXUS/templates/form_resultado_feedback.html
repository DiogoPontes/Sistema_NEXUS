<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Resumo do Evento - CML</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <style>
        body {
            background-color: #556b2f;
        }

        .form-container {
            max-width: 1800px;
            margin: auto;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-top: 40px;
        }

        .dataTables_wrapper .dataTables_filter {
            float: right;
            text-align: right;
        }

        .dataTables_wrapper .dataTables_paginate {
            float: right;
            text-align: right;
        }

        .selected-row {
            background-color: #ffe08a !important; /* cor amarelo claro */
            font-weight: bold;
        }

        tr.selected-row td {
            background-color: #fff3cd !important; /* amarelo claro */
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="form-container">
        <h4 class="mb-3">Consideração do CML acerca do eventos às OM</h4>

        <div class="table-responsive">
            <table id="tabelaMece" class="table table-bordered table-striped">
                <thead class="table-success">
                    <tr>
                        <th>Número do Evento (MECE)</th>
                        <th>OM (MECE)</th>
                        <th>P/G NOME (MECE)</th>
                        <th>Evento, Data, Município (MECE)</th>
                        <th>COM SOC (MECE)</th>
                        <th>Considerações da CCE CML (COM SOC)</th>
                        <th>Nova Manifestação da OM (COM SOC)</th>
                        <th>RI (MECE)</th>


                        <th>Data do Evento (FIDECE)</th>

                        <th>OM (FIDECE)</th>

                        <th>P/G NOME (FIDECE)</th>

                        <th>Evento, Data, Município (FIDECE)</th>
                        <th>LE Pcp (MECE)</th>
                        <th>LE Pcp (FIDECE)</th>
                        <th>LE Sec (FIDECE)</th>
                        <th>Pub A Prio (MECE)</th>
                        <th>Pub A Prio (FIDECE)</th>
                        <th>Pub A Sec (FIDECE)</th>

                        <th>COM SOC (FIDECE)</th>

                        <th>RI (FIDECE)</th>

                    </tr>
                </thead>
                <tbody>
                    {% for fidece in fidece_lista %}
                    <tr class="linha-fidece"
                        data-numero="{{ fidece.cd_mece }}"
                        data-om="{{ fidece.om_mece }}"
                        data-evento="{{ fidece.evento_mece }}"
                        data-comsoc="{{ fidece.comsoc_mece }}">
                        <td>{{ fidece.numero_evento }}</td>
                        <td>{{ fidece.data_mece }}</td>
                        <td>{{ fidece.data_fidece }}</td>
                        <td>{{ fidece.om_mece }}</td>
                        <td>{{ fidece.om_fidece }}</td>
                        <td>{{ fidece.nome_mece }}</td>
                        <td>{{ fidece.nome_fidece }}</td>
                        <td>{{ fidece.evento_mece }}</td>
                        <td>{{ fidece.evento_fidece }}</td>
                        <td>{{ fidece.linha_mece }}</td>
                        <td>{{ fidece.linha_fidece }}</td>
                        <td>{{ fidece.linha2_fidece }}</td>
                        <td>{{ fidece.publico_mece }}</td>
                        <td>{{ fidece.publico_fidece }}</td>
                        <td>{{ fidece.publico2_fidece }}</td>
                        <td>{{ fidece.comsoc_mece }}</td>
                        <td>{{ fidece.comsoc_fidece }}</td>
                        <td>{{ fidece.ri_mece }}</td>
                        <td>{{ fidece.ri_fidece }}</td>

                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="d-flex justify-content-end mt-4">
            <button type="button" class="btn btn-secondary me-2" onclick="history.back()">Voltar</button>
        </div>
        <div id="feedbackForm" class="mt-3 text-end" style="display: none;">
            <form method="post" action="{{ url_for('form_feedback') }}">
                <input type="hidden" name="cd_mece" id="inputNumero">
                <input type="hidden" name="om_mece" id="inputOm">
                <input type="hidden" name="evento_mece" id="inputEvento">
                <input type="hidden" name="comsoc_mece" id="inputComsoc">


                <button type="submit" class="btn btn-warning">FEEDBACK</button>
            </form>
        </div>


    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script>$(document).ready(function () {
            $('#tabelaMece').DataTable({
                language: {
                    url: "//cdn.datatables.net/plug-ins/1.13.6/i18n/pt-BR.json"
                }
            });
        });</script>

    <script>
        document.querySelectorAll('.linha-fidece').forEach(row => {
            row.style.cursor = 'pointer';
            row.addEventListener('click', () => {
                // Remove destaque anterior
                document.querySelectorAll('.linha-fidece').forEach(r => r.classList.remove('selected-row'));

                // Adiciona destaque à linha clicada
                row.classList.add('selected-row');

                // Pega os dados
                const numero = row.dataset.numero;
                const om = row.dataset.om;
                const evento = row.dataset.evento;
                const comsoc = row.dataset.comsoc;

                document.getElementById('inputNumero').value = numero;
                document.getElementById('inputOm').value = om;
                document.getElementById('inputEvento').value = evento;
                document.getElementById('inputComsoc').value = comsoc;

                document.getElementById('feedbackForm').style.display = 'block';
            });
        });

        /*
        document.querySelectorAll('.linha-fidece').forEach(row => {
            row.style.cursor = 'pointer';
            row.addEventListener('click', () => {
                const numero = row.dataset.numero;
                const om = row.dataset.om;
                const evento = row.dataset.evento;
                const comsoc = row.dataset.comsoc;


                document.getElementById('inputNumero').value = numero;
                document.getElementById('inputOm').value = om;
                document.getElementById('inputEvento').value = evento;
                document.getElementById('inputComsoc').value = comsoc;


                document.getElementById('feedbackForm').style.display = 'block';
            });
        });*/
    </script>

</body>
</html>
